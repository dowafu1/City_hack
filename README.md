# **–¶–ú–ü –¢–æ–º—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏ ‚Äì Telegram-–±–æ—Ç** üöÄ

–¢–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç –¥–ª—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø–æ–º–æ—â–∏, –∏–Ω—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–≤—è–∑–∏ —Å –¶–µ–Ω—Ç—Ä–æ–º –º–æ–ª–æ–¥–µ–∂–Ω–æ–π –ø–æ–ª–∏—Ç–∏–∫–∏ –¢–æ–º—Å–∫–æ–π –æ–±–ª–∞—Å—Ç–∏. üåü

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏](#-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏)
- [–ù–∞–≤–∏–≥–∞—Ü–∏—è –≤ –±–æ—Ç–µ](#-–Ω–∞–≤–∏–≥–∞—Ü–∏—è-–≤-–±–æ—Ç–µ)
- [–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å](#-–∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å)
- [AI-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è](#-ai-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏](#-—Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏)
- [–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫](#-—É—Å—Ç–∞–Ω–æ–≤–∫–∞-–∏-–∑–∞–ø—É—Å–∫)
- [–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–±–¥)
- [–õ–æ–≥–∏ –∏ —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥](#-–ª–æ–≥–∏-–∏-—Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [–ö–æ–º–∞–Ω–¥–∞](#-–∫–æ–º–∞–Ω–¥–∞)

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. –ö—É–¥–∞ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è (–∫–æ–Ω—Ç–∞–∫—Ç—ã) üìû
- –°–ø–∏—Å–æ–∫ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤ —Å–ª—É–∂–±: –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –Ω–∞–∑–≤–∞–Ω–∏–µ, —Ç–µ–ª–µ—Ñ–æ–Ω, –æ–ø–∏—Å–∞–Ω–∏–µ.
- –ò—Å—Ç–æ—á–Ω–∏–∫: —Ç–∞–±–ª–∏—Ü–∞ `contacts`.
- ‚ö†Ô∏è –ö–æ–Ω—Ç–∞–∫—Ç—ã –≤—ã–≤–æ–¥—è—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–º –±–µ–∑ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–Ω–æ–ø–æ–∫.

### 2. –¢—Ä–µ–≤–æ–∂–Ω–∞—è –∫–Ω–æ–ø–∫–∞ (SOS) üÜò
- –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `sos_instructions`. –ï—Å–ª–∏ –ø—É—Å—Ç–æ: ¬´–ó–≤–æ–Ω–∏—Ç–µ 112 –∏–ª–∏ 102‚Ä¶¬ª.
- –ü–æ—Å—Ç–æ—è–Ω–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –≤–Ω–∏–∑—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.

### 3. –ù–∞–≤–∏–≥–∞—Ç–æ—Ä –ø–æ–º–æ—â–∏ üß≠
- –†–∞–∑–¥–µ–ª—ã –¥–ª—è –ø–æ–¥—Ä–æ—Å—Ç–∫–æ–≤ –∏ —Ä–æ–¥–∏—Ç–µ–ª–µ–π:
  - –î–µ–ø—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è üòî
  - –°—É–∏—Ü–∏–¥–∞–ª—å–Ω—ã–µ –º—ã—Å–ª–∏ ‚ö†Ô∏è
  - –ê–≥—Ä–µ—Å—Å–∏—è –∏ —Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ üí¢
  - –ü—Ä–æ–±–ª–µ–º—ã —Å –µ–¥–æ–π üçΩÔ∏è
  - –ü–æ–ª–æ–≤–æ–µ –≤–æ—Å–ø–∏—Ç–∞–Ω–∏–µ ü´Ç
  - –°–ª–æ–∂–Ω–æ—Å—Ç–∏ –≤ –æ–±—â–µ–Ω–∏–∏ üë•
  - –î—Ä—É–≥–æ–µ ‚Äî —Ö–æ—á—É –ø–æ–≥–æ–≤–æ—Ä–∏—Ç—å üí¨
- –ö–æ–Ω—Ç–µ–Ω—Ç –∏–∑ —Ç–∞–±–ª–∏—Ü—ã `articles` –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º: `help_me_<role>`, `report_<role>`, `other_<role>` (`role`: `teen`, `adult`).

### 4. –ê–Ω–æ–Ω—Å—ã –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π üìÖ
- –°–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π –∏–∑ `events`: –Ω–∞–∑–≤–∞–Ω–∏–µ, –¥–∞—Ç–∞, –æ–ø–∏—Å–∞–Ω–∏–µ, —Å—Å—ã–ª–∫–∞.
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã.

### 5. –°–æ–≤–µ—Ç –¥–Ω—è / –ü–æ–¥–ø–∏—Å–∫–∞ üí°
- –ö–Ω–æ–ø–∫–∞ ¬´–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É¬ª –¥–æ–±–∞–≤–ª—è–µ—Ç –≤ `subs`, –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–≤–µ—Ç–∞ —Ä–∞–∑ –≤ –¥–µ–Ω—å.
- –§–æ–Ω–æ–≤—ã–π —Ç–∞—Å–∫ `notifier()` —É–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–∞—Å—Å—ã–ª–∫–æ–π.
- –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É.
- –°–æ–≤–µ—Ç—ã –∏–∑ `tips`. –ï—Å–ª–∏ –ø—É—Å—Ç–æ ‚Äî –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π —Ç–µ–∫—Å—Ç.
- –í–æ–∑–º–æ–∂–Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–≤–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ AI.

### 6. –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å (–≤–æ–ø—Ä–æ—Å) ‚ùì
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –≤–æ–ø—Ä–æ—Å, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `questions` —Å `user_id` –∏ timestamp.
- –ü–µ—Ä–µ—Å—ã–ª–∫–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞–º –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞, –Ω–æ —á–∞—Ç –ª–æ–≥–∏—Ä—É–µ—Ç—Å—è –¥–ª—è AI.

### 7. –û–ø—Ä–æ—Å—ã üìä
- –†–∞–∑–¥–µ–ª –µ—Å—Ç—å, –Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç ¬´–ü–æ–∫–∞ –æ–ø—Ä–æ—Å–æ–≤ –Ω–µ—Ç¬ª.

### 8. –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π üë•
- –ü—Ä–∏ `/start` –≤—ã–±–æ—Ä: ¬´–Ø –ø–æ–¥—Ä–æ—Å—Ç–æ–∫¬ª –∏–ª–∏ ¬´–Ø –≤–∑—Ä–æ—Å–ª—ã–π¬ª. –†–æ–ª—å –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç.

### 9. –•—Ä–∞–Ω–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ üìù
- –°–æ–æ–±—â–µ–Ω–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ `chat_history` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ AI-–æ–±—Ä–∞–±–æ—Ç–∫–∏.

---

## üß≠ –ù–∞–≤–∏–≥–∞—Ü–∏—è –≤ –±–æ—Ç–µ

- `/start`: –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –≤—ã–±–æ—Ä —Ä–æ–ª–∏. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é:
  - üÜò –¢—Ä–µ–≤–æ–∂–Ω–∞—è –∫–Ω–æ–ø–∫–∞
  - üß≠ –ú–Ω–µ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å
  - ü§ñ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ (—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ò–ò)
  - üìû –ö—É–¥–∞ –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è?
  - ‚ùì –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å
  - üìÖ –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è
  - üí° –ü–æ–ª—É—á–∏—Ç—å —Å–æ–≤–µ—Ç
  - üîî –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫—É
  - üîÑ –ò–∑–º–µ–Ω–∏—Ç—å —Ä–æ–ª—å
  - üõ†Ô∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å (–¥–ª—è `ADMIN_IDS`)

---

## üõ°Ô∏è –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å

–î–æ—Å—Ç—É–ø –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ `ADMIN_IDS`. –§–æ—Ä–º–∞—Ç—ã –≤–≤–æ–¥–∞:

- **–ö–æ–Ω—Ç–∞–∫—Ç—ã (`ad_contacts`)**: `category|name|+7(XXX)XXX-XX-XX|description`
- **SOS (`ad_sos`)**: –ª—é–±–æ–π —Ç–µ–∫—Å—Ç, –ø–µ—Ä–µ–∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é.
- **–°–æ–±—ã—Ç–∏–µ (`ad_event`)**: `title|YYYY-MM-DD|description|link`
- **–°—Ç–∞—Ç—å—è (`ad_article`)**: `category|title|content`
- **–°–æ–≤–µ—Ç (`ad_tip`)**: –ª—é–±–æ–π —Ç–µ–∫—Å—Ç.

–û–ø–µ—Ä–∞—Ü–∏–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç—Å—è: ¬´‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ¬ª –∏–ª–∏ ¬´‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç¬ª.

---

## ü§ñ AI-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

- **–¶–µ–ø–æ—á–∫–∞ AI (`ai_chain.py`)**:
  - `chainize()`: –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç —á–µ—Ä–µ–∑ Sber AI, —É–ª—É—á—à–∞–µ—Ç —á–µ—Ä–µ–∑ Mistral AI.
  - `get_tip()`: —Å–æ–∑–¥–∞—ë—Ç —Å–æ–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö (Sber AI).
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: —Ç–µ—Å—Ç–∏—Ä—É–µ—Ç—Å—è, –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ –≤ –±–æ—Ç. –î–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –∞–¥–º–∏–Ω–∞–º–∏.
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∏**: langchain-gigachat, mistralai.
- **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ**: `SBER_TOKEN`, `MISTRAL_TOKEN`.
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ**: –ø–∞–ø–∫–∞ `ai/context/` –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–º–ø—Ç—ã). –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä—É–≥–∏—Ö –Ω–µ–π—Ä–æ—Å–µ—Ç–µ–π –≤–æ–∑–º–æ–∂–Ω–∞ —á–µ—Ä–µ–∑ API.

---

## üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

–ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

- **ai/** üìÅ ‚Äî AI-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ —Ü–µ–ø–æ—á–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏.
  - `__init__.py`
  - `ai_chain.py` ‚Äî —Ñ—É–Ω–∫—Ü–∏–∏ `chainize` –∏ `get_tip`.
  - `mistral_ai.py` ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Mistral AI.
  - `sber_ai.py` ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Sber AI (GigaChat).
  - **context/** üìÅ ‚Äî —Ñ–∞–π–ª—ã –¥–ª—è AI-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–º–ø—Ç—ã, –¥–∞–Ω–Ω—ã–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞).

- **backend/** üìÅ ‚Äî backend –±–æ—Ç–∞ –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.
  - `__init__.py`
  - `bot.py` ‚Äî –ª–æ–≥–∏–∫–∞ –±–æ—Ç–∞ (aiogram, FSM, –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏).
  - `db.py` ‚Äî —Ä–∞–±–æ—Ç–∞ —Å PostgreSQL (asyncpg, CRUD).

- **tests/** üìÅ ‚Äî unit-—Ç–µ—Å—Ç—ã.
  - `test.py` ‚Äî —Ç–µ—Å—Ç—ã –±–æ—Ç–∞ –∏ AI.
  - `test_DB.py` ‚Äî —Ç–µ—Å—Ç—ã –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

- **–ö–æ—Ä–Ω–µ–≤—ã–µ —Ñ–∞–π–ª—ã**:
  - `README.md` ‚Äî –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.
  - `requirements.txt` ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
  - `.env` ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –∫–æ–º–º–∏—Ç–∏—Ç—Å—è).

–≠—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–∞–∑–¥–µ–ª—è–µ—Ç –ª–æ–≥–∏–∫—É AI, –±–æ—Ç–∞ –∏ —Ç–µ—Å—Ç–æ–≤, —É–ø—Ä–æ—â–∞—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫—É.

---

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–Ø–∑—ã–∫**: Python 3.11+
- **–§—Ä–µ–π–º–≤–æ—Ä–∫**: aiogram 3.x
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ**: PostgreSQL (asyncpg)
- **FSM**: aiogram.fsm + MemoryStorage
- **AI**: langchain-gigachat, mistralai
- **–î—Ä—É–≥–æ–µ**: python-dotenv, asyncpg, pytest

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Python 3.11+
- Git
- PostgreSQL

### –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
git clone https://github.com/dowafu1/City_hack.git
cd City_hack
```

### –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
```bash
python -m venv .venv
source .venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ `.env` –≤ –∫–æ—Ä–Ω–µ:
```env
BOT_TOKEN=123456789:AA...
ADMIN_IDS=123456789,987654321
SBER_TOKEN=your_sber_token
MISTRAL_TOKEN=your_mistral_token
DB_HOST=localhost
DB_PORT=5432
DB_USER=your_db_user
DB_PASS=your_db_pass
DB_NAME=cmp_bot
```

### –ó–∞–ø—É—Å–∫
```bash
python bot.py
```
> –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–æ–∑–¥–∞–Ω–∞ –∑–∞—Ä–∞–Ω–µ–µ.

---

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

- `BOT_TOKEN` ‚Äî –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞
- `ADMIN_IDS` ‚Äî –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞
- `SBER_TOKEN` ‚Äî –¥–ª—è Sber AI
- `MISTRAL_TOKEN` ‚Äî –¥–ª—è Mistral AI
- `DB_HOST`, `DB_PORT`, `DB_USER`, `DB_PASS`, `DB_NAME` ‚Äî –¥–ª—è PostgreSQL (–¥–µ—Ñ–æ–ª—Ç—ã: localhost:5432, user=—Ç–µ–∫—É—â–∏–π –ª–æ–≥–∏–Ω, pass="", db=cmp_bot)

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

–¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ `init_db()`:
- `users(user_id PK, role)`
- `articles(id PK, category, title, content)`
- `contacts(id PK, category, name, phone, description)`
- `sos_instructions(id PK, text)`
- `events(id PK, title, date, description, link)`
- `questions(id PK, user_id, question, timestamp)`
- `tips(id PK, text)`
- `polls(id PK, poll_id, results)`
- `logs(id PK, user_id, action, timestamp)`
- `subs(user_id PK, next_at)`
- `chat_history(id PK, chat_id, role, content, timestamp)`

---

## üìà –õ–æ–≥–∏ –∏ —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥

- **–õ–æ–≥–∏**: –¥–µ–π—Å—Ç–≤–∏—è (`start`, –ø–µ—Ä–µ—Ö–æ–¥—ã, —Å–æ–≤–µ—Ç—ã) –≤ `logs`.
- **–ò—Å—Ç–æ—Ä–∏—è —á–∞—Ç–∞**: —Å–æ–æ–±—â–µ–Ω–∏—è –≤ `chat_history` (—Ä–æ–ª–∏: `user`, `ai`).
- **–¢—Ä–æ—Ç—Ç–ª–∏–Ω–≥**: ~10 –∑–∞–ø—Ä–æ—Å–æ–≤/—Å–µ–∫ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ `ThrottlingMiddleware`.

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç—ã
Unit-—Ç–µ—Å—Ç—ã (pytest) –¥–ª—è:
- **Middleware**: —Ç—Ä–æ—Ç—Ç–ª–∏–Ω–≥, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤.
- **–ë–î**: —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü, CRUD, —Ä–æ–ª–∏, –ª–æ–≥–∏.
- **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏**: `/start`, –≤—ã–±–æ—Ä —Ä–æ–ª–∏, –Ω–∞–≤–∏–≥–∞—Ç–æ—Ä, –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å, –ø–æ–¥–ø–∏—Å–∫–∞, –≤–æ–ø—Ä–æ—Å—ã, AI.
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: —Ñ–æ—Ä–º–∞—Ç —Ç–µ–ª–µ—Ñ–æ–Ω–∞, –¥–∞—Ç—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫.
- **FSM**: —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏.

### –†–µ–∑—É–ª—å—Ç–∞—Ç—ã
- –í—Å–µ —Ç–µ—Å—Ç—ã —É—Å–ø–µ—à–Ω—ã (100% pass rate).
- –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞: 87% (coverage.py).
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏: –¥–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (—Å–∏–º—É–ª—è—Ü–∏—è Telegram API) –∏ e2e-—Ç–µ—Å—Ç—ã.

---

## üë• –ö–æ–º–∞–Ω–¥–∞

- –î–∞–Ω–∏–∏–ª –¢–∞—Ç–∞—Ä–Ω–∏–∫–æ–≤ ‚Äî –¢–∏–º–ª–∏–¥, Backend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
- –®–µ–≤—á–µ–Ω–∫–æ –ï–≥–æ—Ä ‚Äî ML-–∏–Ω–∂–µ–Ω–µ—Ä, Backend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, –¢–µ—Å—Ç–∏—Ä–æ–≤—â–∏–∫
- –©–∏–ª–∫–æ –ú–∞–∫—Å–∏–º ‚Äî ML-–∏–Ω–∂–µ–Ω–µ—Ä, Backend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫
- –î–∞—Ä—å—è –ö–ª–∏–º–æ–≤–∞ ‚Äî Frontend-—Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫, –ê–Ω–∞–ª–∏—Ç–∏–∫, –î–∏–∑–∞–π–Ω–µ—Ä
