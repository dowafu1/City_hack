# City_hack

# **ะฆะะ ะขะพะผัะบะพะน ะพะฑะปะฐััะธ โ Telegram-ะฑะพั** ๐

ะขะตะปะตะณัะฐะผ-ะฑะพั ะดะปั ะฟัะธัะพะปะพะณะธัะตัะบะพะน ะฟะพะผะพัะธ, ะธะฝัะพัะผะธัะพะฒะฐะฝะธั ะธ ัะฒัะทะธ ั ะฆะตะฝััะพะผ ะผะพะปะพะดะตะถะฝะพะน ะฟะพะปะธัะธะบะธ ะขะพะผัะบะพะน ะพะฑะปะฐััะธ. ๐

## ๐ ะกะพะดะตัะถะฐะฝะธะต

- [ะะพะทะผะพะถะฝะพััะธ](#-ะฒะพะทะผะพะถะฝะพััะธ)
- [ะะฐะฒะธะณะฐัะธั ะฒ ะฑะพัะต](#-ะฝะฐะฒะธะณะฐัะธั-ะฒ-ะฑะพัะต)
- [ะะดะผะธะฝ-ะฟะฐะฝะตะปั](#-ะฐะดะผะธะฝ-ะฟะฐะฝะตะปั)
- [AI-ะธะฝัะตะณัะฐัะธั](#-ai-ะธะฝัะตะณัะฐัะธั)
- [ะกัััะบัััะฐ ะฟัะพะตะบัะฐ](#-ััััะบัััะฐ-ะฟัะพะตะบัะฐ)
- [ะขะตัะฝะพะปะพะณะธะธ](#-ัะตัะฝะพะปะพะณะธะธ)
- [ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ](#-ัััะฐะฝะพะฒะบะฐ-ะธ-ะทะฐะฟััะบ)
- [ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั](#-ะฟะตัะตะผะตะฝะฝัะต-ะพะบััะถะตะฝะธั)
- [ะกัััะบัััะฐ ะะ](#-ััััะบัััะฐ-ะฑะด)
- [ะะพะณะธ ะธ ััะพััะปะธะฝะณ](#-ะปะพะณะธ-ะธ-ััะพััะปะธะฝะณ)
- [ะะพะผะฐะฝะดะฐ](#-ะบะพะผะฐะฝะดะฐ)

---

## ๐ ะะพะทะผะพะถะฝะพััะธ

### 1. ะัะดะฐ ะพะฑัะฐัะฐัััั (ะบะพะฝัะฐะบัั) ๐

- ะัะพะฑัะฐะถะฐะตั ัะฟะธัะพะบ ะบะพะฝัะฐะบัะพะฒ ัะปัะถะฑ: ะบะฐัะตะณะพัะธั, ะฝะฐะทะฒะฐะฝะธะต, ัะตะปะตัะพะฝ, ะพะฟะธัะฐะฝะธะต.
- ะััะพัะฝะธะบ: ัะฐะฑะปะธัะฐ `contacts`.
- โ๏ธ ะะพะบะฐ **ะฝะตั ะบะฝะพะฟะพะบ "ะะพะทะฒะพะฝะธัั/ะกะบะพะฟะธัะพะฒะฐัั/ะะตัะตะนัะธ ะฝะฐ ัะฐะนั"** โ ะธะฝัะพัะผะฐัะธั ะฒัะฒะพะดะธััั ัะตะบััะพะผ.

### 2. ะขัะตะฒะพะถะฝะฐั ะบะฝะพะฟะบะฐ (SOS) ๐

- ะะพะบะฐะทัะฒะฐะตั ะธะฝััััะบัะธั ะธะท ัะฐะฑะปะธัั `sos_instructions` (ะฑะตััััั ะพะดะฝะฐ ะทะฐะฟะธัั). ะัะปะธ ะฟัััะพ โ ะดะตัะพะปัะฝัะน ัะตะบัั: ยซะัะธ
  ะพะฟะฐัะฝะพััะธ ะทะฒะพะฝะธัะต 112 ะธะปะธ 102โฆยป.

### 3. ะะฐะฒะธะณะฐัะพั ะฟะพะผะพัะธ ๐งญ

- ะะฐะทะดะตะปั: ยซะะฝะต ะฝัะถะฝะฐ ะฟะพะผะพััยป ๐, ยซะฅะพัั ัะพะพะฑัะธัั ะพ ะฟัะพะฑะปะตะผะตยป ๐จ, ยซะัะพััะพ ัะพัั ะฟะพะณะพะฒะพัะธััยป ๐ง.
- ะะพะฝัะตะฝั ะฑะตััััั ะธะท `articles` ะฟะพ ะบะฐัะตะณะพัะธัะผ: `help_me_<role>`, `report_<role>`, `other_<role>`, ะณะดะต `<role>` โ `teen`
  ะธะปะธ `parent`.

### 4. ะะฝะพะฝัั ะผะตัะพะฟัะธััะธะน ๐

- ะัะฒะพะดะธั ัะฟะธัะพะบ ัะพะฑััะธะน ะธะท `events` (ะฝะฐะทะฒะฐะฝะธะต, ะดะฐัะฐ, ะพะฟะธัะฐะฝะธะต, ัััะปะบะฐ).
- ะฃะฒะตะดะพะผะปะตะฝะธั ะพ ัะพะฑััะธัั **ะฝะต ัะตะฐะปะธะทะพะฒะฐะฝั** ะฟะพะบะฐ.

### 5. ะกะพะฒะตั ะดะฝั / ะะพะดะฟะธัะบะฐ ๐ก

- ะะฝะพะฟะบะฐ ยซะะพะดะฟะธัะฐัััั ะฝะฐ ะฟะพะดะดะตัะถะบัยป ะดะพะฑะฐะฒะปัะตั ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ `subs` ะธ ะฟะปะฐะฝะธััะตั ะพัะฟัะฐะฒะบั ัะปััะฐะนะฝะพะณะพ ัะพะฒะตัะฐ ัะฐะท ะฒ ะดะตะฝั.
- ะัะฟัะฐะฒะบะฐ ะฟัะพะธััะพะดะธั ัะพะฝะพะฒัะผ ัะฐัะบะพะผ `notifier()`.
- ะะพะฒัะพัะฝะพะต ะฝะฐะถะฐัะธะต โ ะพัะผะตะฝะฐ ะฟะพะดะฟะธัะบะธ.
- ะกะพะฒะตัั ะฑะตััััั ะธะท `tips` (ัะปััะฐะนะฝะฐั ะทะฐะฟะธัั). ะัะปะธ ะฟัััะพ โ ะดะตัะพะปัะฝัะน ัะพะฒะตั.
- ะกะพะฒะตัั ะผะพะณัั ะณะตะฝะตัะธัะพะฒะฐัััั ั ะฟะพะผะพััั AI (ัะผ. [AI-ะธะฝัะตะณัะฐัะธั](#-ai-ะธะฝัะตะณัะฐัะธั)).

### 6. ะะฑัะฐัะฝะฐั ัะฒัะทั (ะฒะพะฟัะพั) โ

- ะะพ ะบะฝะพะฟะบะต ยซะะฐะดะฐัั ะฒะพะฟัะพัยป ะฑะพั ะฟัะพัะธั ะฒะฒะตััะธ ัะตะบัั.
- ะะพะฟัะพั ัะพััะฐะฝัะตััั ะฒ `questions` ั `user_id` ะธ timestamp.
- ะะตัะตััะปะบะฐ ัะบัะฟะตััะฐะผ ะธ ะพัะฒะตัั ะฟะพะปัะทะพะฒะฐัะตะปั **ะฟะพะบะฐ ะฝะต ัะตะฐะปะธะทะพะฒะฐะฝั** (ะฝะพ ะธััะพัะธั ัะฐัะฐ ะปะพะณะธััะตััั ะดะปั ะฟะพัะตะฝัะธะฐะปัะฝะพะน
  AI-ะพะฑัะฐะฑะพัะบะธ).

### 7. ะะฟัะพัั ๐

- ะะฐะทะดะตะป ะตััั, ะฝะพ ัะตะนัะฐั ะฟะพะบะฐะทัะฒะฐะตั ยซะะพะบะฐ ะพะฟัะพัะพะฒ ะฝะตัยป. ะะฐะฑะพัะฐ ั ัะฐะฑะปะธัะตะน `polls` ะฝะต ัะตะฐะปะธะทะพะฒะฐะฝะฐ.

### 8. ะะพะปะธ ะฟะพะปัะทะพะฒะฐัะตะปะตะน ๐ฅ

- ะัะธ `/start` ะฟะพะปัะทะพะฒะฐัะตะปั ะฒัะฑะธัะฐะตั: ยซะฏ ะฟะพะดัะพััะพะบยป ะธะปะธ ยซะฏ ัะพะดะธัะตะปัยป. ะะพะปั ะฒะปะธัะตั ะฝะฐ ะบะพะฝัะตะฝั ะฒ ะฝะฐะฒะธะณะฐัะพัะต.

### 9. ะฅัะฐะฝะตะฝะธะต ะธััะพัะธะธ ัะฐัะฐ ๐

- ะัะต ะฒะทะฐะธะผะพะดะตะนััะฒะธั (ะฒะพะฟัะพัั ะฟะพะปัะทะพะฒะฐัะตะปั, ะพัะฒะตัั ะฑะพัะฐ) ะปะพะณะธัััััั ะฒ ัะฐะฑะปะธัั `chat_history` ะดะปั ะฐะฝะฐะปะธะทะฐ ะธะปะธ ะฑัะดััะตะน
  AI-ะพะฑัะฐะฑะพัะบะธ.

---

## ๐งญ ะะฐะฒะธะณะฐัะธั ะฒ ะฑะพัะต

- `/start` โ ะฟัะธะฒะตัััะฒะธะต + ะฒัะฑะพั ัะพะปะธ (ะตัะปะธ ะฝะต ะทะฐะดะฐะฝะฐ). ะะฐะปะตะต โ **ะณะปะฐะฒะฝะพะต ะผะตะฝั**:

    - ๐ ะขัะตะฒะพะถะฝะฐั ะบะฝะพะฟะบะฐ
    - ๐งญ ะะฝะต ััะพัะฝะพ ะฝัะถะฝะฐ ะฟะพะผะพัั
    - ๐ ะัะดะฐ ะพะฑัะฐัะธัััั?
    - โ ะะฐะดะฐัั ะฒะพะฟัะพั
    - ๐ ะะตัะพะฟัะธััะธั
    - ๐ก ะะพะปััะธัั ัะพะฒะตั
    - ๐ ะะพะดะฟะธัะฐัััั ะฝะฐ ะฟะพะดะดะตัะถะบั (ัะพะณะณะป)
    - ๐ ะะทะผะตะฝะธัั ัะพะปั
    - ๐๏ธ ะะดะผะธะฝ-ะฟะฐะฝะตะปั (ะฒะธะดะฝะฐ ัะพะปัะบะพ ะฐะดะผะธะฝะฐะผ ะธะท `ADMIN_IDS`)

---

## ๐ก๏ธ ะะดะผะธะฝ-ะฟะฐะฝะตะปั

ะะพัััะฟะฝะฐ ะฟะพะปัะทะพะฒะฐัะตะปัะผ ั ID ะฒ `ADMIN_IDS`. ะคะพัะผะฐัั ะฒะฒะพะดะฐ:

### ะะพะฝัะฐะบัั (`ad_contacts`) ๐

- ะคะพัะผะฐั: `category|name|+7(XXX)XXX-XX-XX|description`
- ะขะตะปะตัะพะฝ ะฒะฐะปะธะดะธััะตััั ะฟะพ ัะฐะฑะปะพะฝั `+7(XXX)XXX-XX-XX`.

### SOS (`ad_sos`) ๐

- ะะฒะพะด: ะปัะฑะพะน ัะตะบัั. ะะตัะตะทะฐะฟะธััะฒะฐะตั ะตะดะธะฝััะฒะตะฝะฝัั ะธะฝััััะบัะธั.

### ะกะพะฑััะธะต (`ad_event`) ๐

- ะคะพัะผะฐั: `title|YYYY-MM-DD|description|link`

### ะกัะฐััั (`ad_article`) ๐

- ะคะพัะผะฐั: `category|title|content`
- ะะตะบะพะผะตะฝะดัะตะผัะต ะบะฐัะตะณะพัะธะธ: `help_me_teen`, `help_me_parent`, `report_teen`, `report_parent`, `other_teen`,
  `other_parent`.

### ะกะพะฒะตั (`ad_tip`) ๐ก

- ะะฒะพะด: ะปัะฑะพะน ัะตะบัั (ะดะพะฑะฐะฒะปัะตั ะฒ ะฟัะป ัะพะฒะตัะพะฒ).

ะัะต ะพะฟะตัะฐัะธะธ ะฟะพะดัะฒะตัะถะดะฐัััั ัะพะพะฑัะตะฝะธะตะผ ยซโ ะกะพััะฐะฝะตะฝะพยป ะธะปะธ ะพัะธะฑะบะพะน ยซโ ะะตะฒะตัะฝัะน ัะพัะผะฐัยป.

---

## ๐ค AI-ะธะฝัะตะณัะฐัะธั

- **ะฆะตะฟะพัะบะฐ AI (ai_chain.py):** ะัะฟะพะปัะทัะตั Sber AI (GigaChat) ะธ Mistral AI ะดะปั ะณะตะฝะตัะฐัะธะธ/ัะปัััะตะฝะธั ะพัะฒะตัะพะฒ.
    - `chainize()`: ะะตะฝะตัะธััะตั ะพัะฒะตั ะฝะฐ ะทะฐะฟัะพั ะฟะพะปัะทะพะฒะฐัะตะปั ัะตัะตะท Sber, ะทะฐัะตะผ ัะปัััะฐะตั ะตะณะพ ั ะฟะพะผะพััั Mistral (ะบะฐะบ
      ัะผะฟะฐัะธัะฝัะน ะฟัะธัะพะปะพะณ).
    - `get_tip()`: ะะตะฝะตัะธััะตั ะฝะพะฒัะน "ัะพะฒะตั ะดะฝั" ะฝะฐ ะพัะฝะพะฒะต ะฟัะตะดัะดััะธั, ะธัะฟะพะปัะทัั Sber AI.
- **ะัะฟะพะปัะทะพะฒะฐะฝะธะต:** ะะพะบะฐ ะฝะต ะธะฝัะตะณัะธัะพะฒะฐะฝะพ ะฝะฐะฟััะผัั ะฒ ะฑะพัะฐ (ัะตััะธััะตััั ะฒ `main()`). ะะพะถะตั ะธัะฟะพะปัะทะพะฒะฐัััั ะดะปั ะณะตะฝะตัะฐัะธะธ
  ะบะพะฝัะตะฝัะฐ (ัะพะฒะตัะพะฒ, ััะฐัะตะน), ะบะพัะพััะน ะฟะพัะพะผ ะดะพะฑะฐะฒะปัะตััั ะฒ ะะ ะฐะดะผะธะฝะฐะผะธ.
- **ะะธะฑะปะธะพัะตะบะธ:** langchain-gigachat (ะดะปั Sber), mistralai.
- **ะะตัะตะผะตะฝะฝัะต:** `SBER_TOKEN`, `MISTRAL_TOKEN` ะฒ .env.
- **ะะพะฟะพะปะฝะธัะตะปัะฝัะต ะฒะพะทะผะพะถะฝะพััะธ:** ะะพะถะฝะพ ะทะฐะณััะถะฐัั ัะฐะนะปั ะธะท ะฟะฐะฟะบะธ `context` ะดะปั ะฐะฝะฐะปะธะทะฐ ะธ ะธะฝัะตะณัะฐัะธะธ ะฒ AI-ัะตะฟะพัะบั (
  ะฝะฐะฟัะธะผะตั, ะดะปั ะฟัะตะดะพััะฐะฒะปะตะฝะธั ะดะพะฟะพะปะฝะธัะตะปัะฝะพะณะพ ะบะพะฝัะตะบััะฐ ะฒ ะฟัะพะผะฟัะฐั). ะขะฐะบะถะต ะฟะพะดะดะตัะถะธะฒะฐะตััั ะดะพะฑะฐะฒะปะตะฝะธะต ะดััะณะธั
  ะฝะตะนัะพัะตัะตะน (ะฝะฐะฟัะธะผะตั, ัะตัะตะท ะธะฝัะตะณัะฐัะธั ั API OpenAI, Anthropic ะธะปะธ ะฐะฝะฐะปะพะณะธัะฝัะผะธ) ะดะปั ะดะฐะปัะฝะตะนัะตะณะพ ัะปัััะตะฝะธั ะบะฐัะตััะฒะฐ
  ะพัะฒะตัะพะฒ, ะฟััะตะผ ัะฐััะธัะตะฝะธั ััะฝะบัะธะธ `chainize()` ะธะปะธ ัะพะทะดะฐะฝะธั ะฝะพะฒัั ัะตะฟะพัะตะบ.

---

## ๐๏ธ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

ะัะพะตะบั ะพัะณะฐะฝะธะทะพะฒะฐะฝ ะฒ ะผะพะดัะปัะฝัั ััััะบัััั ะดะปั ัะดะพะฑััะฒะฐ ัะฐะทัะฐะฑะพัะบะธ ะธ ัะตััะธัะพะฒะฐะฝะธั. ะะพั ะบะฐะบ ะฒัะณะปัะดะธั ะฐััะธัะตะบัััะฐ:

- **ai/** ๐ โ ะะพะดัะปั ะดะปั AI-ะธะฝัะตะณัะฐัะธะน ะธ ัะตะฟะพัะตะบ ะพะฑัะฐะฑะพัะบะธ.
    - `__init__.py` โ ะะฝะธัะธะฐะปะธะทะฐัะธั ะผะพะดัะปั.
    - `ai_chain.py` โ ะัะฝะพะฒะฝะฐั ัะตะฟะพัะบะฐ AI (ััะฝะบัะธะธ `chainize` ะธ `get_tip` ะดะปั ะณะตะฝะตัะฐัะธะธ ะธ ัะปัััะตะฝะธั ะพัะฒะตัะพะฒ).
    - `mistral_ai.py` โ ะะฝัะตะณัะฐัะธั ั Mistral AI.
    - `sber_ai.py` โ ะะฝัะตะณัะฐัะธั ั Sber AI (GigaChat).

- **backend/** ๐ โ ะัะฝะพะฒะฝะพะน backend ะฑะพัะฐ ะธ ะฑะฐะทั ะดะฐะฝะฝัั.
    - `__init__.py` โ ะะฝะธัะธะฐะปะธะทะฐัะธั ะผะพะดัะปั.
    - `bot.py` โ ะะพะณะธะบะฐ Telegram-ะฑะพัะฐ (aiogram, FSM, ะพะฑัะฐะฑะพััะธะบะธ ัะพะพะฑัะตะฝะธะน ะธ ะบะพะปะฑัะบะพะฒ).
    - `db.py` โ ะะฐะฑะพัะฐ ั PostgreSQL (asyncpg, ััะฝะบัะธะธ ะดะปั ะะ: init_db, CRUD-ะพะฟะตัะฐัะธะธ).

- **tests/** ๐ โ ะะพะดัะปั ะดะปั unit-ัะตััะพะฒ.
    - `test.py` โ ะะฑัะธะต ัะตััั ะดะปั ะฑะพัะฐ ะธ AI-ะบะพะผะฟะพะฝะตะฝัะพะฒ.
    - `test_DB.py` โ ะขะตััั ะดะปั ะฑะฐะทั ะดะฐะฝะฝัั (ะฟัะพะฒะตัะบะธ ัะพะตะดะธะฝะตะฝะธั, ะทะฐะฟัะพัะพะฒ ะธ ั.ะด.).

- **ะััะณะธะต ัะฐะนะปั ะฒ ะบะพัะฝะต:**
    - `README.md` ๐ โ ะะพะบัะผะตะฝัะฐัะธั ะฟัะพะตะบัะฐ.
    - `requirements.txt` ๐ โ ะกะฟะธัะพะบ ะทะฐะฒะธัะธะผะพััะตะน.
    - `.env` ๐ โ ะคะฐะนะป ั ะฟะตัะตะผะตะฝะฝัะผะธ ะพะบััะถะตะฝะธั (ะฝะต ะบะพะผะผะธัะธััั).

ะญัะฐ ััััะบัััะฐ ะพะฑะตัะฟะตัะธะฒะฐะตั ัะฐะทะดะตะปะตะฝะธะต ะปะพะณะธะบะธ: AI ะพัะดะตะปัะฝะพ ะพั ะฑะพัะฐ, ัะตััั ะธะทะพะปะธัะพะฒะฐะฝั, ััะพ ัะฟัะพัะฐะตั ะผะฐัััะฐะฑะธัะพะฒะฐะฝะธะต ะธ ะพัะปะฐะดะบั. ๐๏ธ

---
๐งช ะขะตััะธัะพะฒะฐะฝะธะต

ะขะตััั ะฒ ะฟัะพะตะบัะต: Unit-ัะตััั (pytest) ะดะปั ะบะปััะตะฒัั ะบะพะผะฟะพะฝะตะฝัะพะฒ: middleware (ััะพััะปะธะฝะณ), ะะ-ะพะฟะตัะฐัะธะน (init_db,
get/set_role, log ะธ CRUD), ะพะฑัะฐะฑะพััะธะบะพะฒ ัะพะพะฑัะตะฝะธะน ะธ ะบะพะปะฑัะบะพะฒ (start, roles, navigation, admin panel, subscription,
question saving ะธ ะดั.).
ะะตะทัะปััะฐัั: ะัะต ัะตััั ะฟัะพัะปะธ ััะฟะตัะฝะพ. ะะพะบัััะธะต ะบะพะดะฐ: 87%. ะัะฝะพะฒะฝัะต ััะฝะบัะธะธ (ะฑะพั-ะปะพะณะธะบะฐ, FSM, DB-ะธะฝัะตัะฐะบัะธะธ) ะฟะพะปะฝะพัััั
ะฟัะพะฒะตัะตะฝั.

---

## ๐๏ธ ะขะตัะฝะพะปะพะณะธะธ

- **ะฏะทัะบ:** Python 3.11+ ๐
- **ะคัะตะนะผะฒะพัะบ:** aiogram 3.x ๐ค
- **ะฅัะฐะฝะธะปะธัะต:** **PostgreSQL** (asyncpg; ะฑะฐะทะฐ ัะพะทะดะฐัััั ะฒัััะฝัั, ัะฐะฑะปะธัั โ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฒ `init_db()`) ๐๏ธ
- **FSM:** `aiogram.fsm` + `MemoryStorage` ๐
- **AI:** langchain-gigachat (Sber AI), mistralai (Mistral AI) ๐ง
- **ะััะณะพะต:** python-dotenv, asyncpg ๐ฆ

---

## ๐ฆ ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ

### ะขัะตะฑะพะฒะฐะฝะธั

- Python 3.11+ ๐
- Git ๐
- PostgreSQL (ัััะฐะฝะพะฒะธัะต ัะตัะฒะตั, ัะพะทะดะฐะนัะต ะะ ะธ ะฟะพะปัะทะพะฒะฐัะตะปั) ๐๏ธ

### ะะปะพะฝะธัะพะฒะฐะฝะธะต

```bash
git clone https://github.com/dowafu1/City_hack.git
cd City_hack
```

### ะะธัััะฐะปัะฝะพะต ะพะบััะถะตะฝะธะต ะธ ะทะฐะฒะธัะธะผะพััะธ

```bash
python -m venv .venv
source .venv/bin/activate 
pip install --upgrade pip
pip install -r requirements.txt
```

> ะคะฐะนะป `requirements.txt` ัะพะดะตัะถะธั ะฒัะต ะฝะตะพะฑัะพะดะธะผัะต ะทะฐะฒะธัะธะผะพััะธ: aiogram, python-dotenv, asyncpg, langchain-gigachat,
> mistralai.

### ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

ะกะพะทะดะฐะนัะต ัะฐะนะป `.env` ะฒ ะบะพัะฝะต ะฟัะพะตะบัะฐ:

```env
BOT_TOKEN=123456789:AA...    # ะขะพะบะตะฝ ะฑะพัะฐ ะพั @BotFather
ADMIN_IDS=123456789,987654321 # ะกะฟะธัะพะบ ID ะฐะดะผะธะฝะพะฒ ัะตัะตะท ะทะฐะฟัััั
SBER_TOKEN=your_sber_token    # ะขะพะบะตะฝ ะดะปั Sber AI (GigaChat)
MISTRAL_TOKEN=your_mistral_token # ะขะพะบะตะฝ ะดะปั Mistral AI
DB_HOST=localhost             # ะฅะพัั PostgreSQL
DB_PORT=5432                  # ะะพัั PostgreSQL
DB_USER=your_db_user          # ะะพะปัะทะพะฒะฐัะตะปั ะะ
DB_PASS=your_db_pass          # ะะฐัะพะปั ะะ
DB_NAME=cmp_bot               # ะะผั ะะ (ัะพะทะดะฐะนัะต ะทะฐัะฐะฝะตะต)
```

### ะะฐะฟััะบ

```bash
python bot.py
```

> ะขะฐะฑะปะธัั ะฒ ะะ ัะพะทะดะฐัััั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟัะธ ะฟะตัะฒะพะผ ะทะฐะฟััะบะต. ะะฐะทะฐ ะดะฐะฝะฝัั ะดะพะปะถะฝะฐ ะฑััั ัะพะทะดะฐะฝะฐ ะทะฐัะฐะฝะตะต. โ

---

## ๐ง ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

- `BOT_TOKEN` โ ะพะฑัะทะฐัะตะปัะฝะฐ ๐
- `ADMIN_IDS` โ ะฝะตะพะฑัะทะฐัะตะปัะฝะฐ ๐ฅ
- `SBER_TOKEN` โ ะดะปั Sber AI ๐ง
- `MISTRAL_TOKEN` โ ะดะปั Mistral AI ๐ง
- `DB_HOST`, `DB_PORT`, `DB_USER`, `DB_PASS`, `DB_NAME` โ ะดะปั PostgreSQL (ะดะตัะพะปัั: localhost:5432, user=ัะตะบััะธะน ะปะพะณะธะฝ,
  pass="", db=cmp_bot) ๐๏ธ

---

## ๐๏ธ ะกัััะบัััะฐ ะะ

ะขะฐะฑะปะธัั ัะพะทะดะฐัััั ะฒ `init_db()`:

- `users(user_id PK, role)` ๐ค
- `articles(id PK, category, title, content)` ๐
- `contacts(id PK, category, name, phone, description)` ๐
- `sos_instructions(id PK, text)` ๐
- `events(id PK, title, date, description, link)` ๐
- `questions(id PK, user_id, question, timestamp)` โ
- `tips(id PK, text)` ๐ก
- `polls(id PK, poll_id, results)` *(ะทะฐัะตะทะตัะฒะธัะพะฒะฐะฝะพ)* ๐
- `logs(id PK, user_id, action, timestamp)` ๐
- `subs(user_id PK, next_at)` ๐
- `chat_history(id PK, chat_id, role, content, timestamp)` โ ะธััะพัะธั ัะพะพะฑัะตะฝะธะน (user/ai) ๐

---

## ๐ ะะพะณะธ ะธ ััะพััะปะธะฝะณ

- **ะะพะณะธ:** ะะตะบะพัะพััะต ะดะตะนััะฒะธั ะฟะธััััั ะฒ `logs` (`start`, ะฟะตัะตัะพะดั ะฟะพ ัะฐะทะดะตะปะฐะผ, tip ะธ ะฟั.). ๐
- **ะััะพัะธั ัะฐัะฐ:** ะ `chat_history` ะปะพะณะธัััััั ัะพะพะฑัะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปั ะธ ะฑะพัะฐ (ัะพะปะธ: 'user'/'ai'). ๐
- **ะขัะพััะปะธะฝะณ:** Middleware ะพะณัะฐะฝะธัะธะฒะฐะตั ัะฐััะพัั ะดะปั ะพะดะฝะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั (ะฟะพ ัะผะพะปัะฐะฝะธั ~10 ะทะฐะฟัะพัะพะฒ/ัะตะบ.). โก

---

## ๐ฅ ะะพะผะฐะฝะดะฐ

- ะะฐะฝะธะธะป ะขะฐัะฐัะฝะธะบะพะฒ โ ะขะธะผะปะธะด, Backend-ัะฐะทัะฐะฑะพััะธะบ
- ะจะตะฒัะตะฝะบะพ ะะณะพั โ ML-ะธะฝะถะตะฝะตั, Backend-ัะฐะทัะฐะฑะพััะธะบ, ะขะตััะธัะพะฒัะธะบ
- ะฉะธะปะบะพ ะะฐะบัะธะผ โ ML-ะธะฝะถะตะฝะตั, Backend-ัะฐะทัะฐะฑะพััะธะบ
- ะะฐััั ะะปะธะผะพะฒะฐ โ Frontend-ัะฐะทัะฐะฑะพััะธะบ, ะะฝะฐะปะธัะธะบ, ะะธะทะฐะนะฝะตั 